# 1365-有多少小于当前数字的数字

## 题述

![image-20220829213029559](https://happygoing.oss-cn-beijing.aliyuncs.com/img/image-20220829213029559.png)

## 思路

- 两层for循环暴力查找，时间复杂度为$O(n^2)$

### 优化

- 要找小于当前数字的数字，那么从小到大排序之后，该数字之前的数字就都是比它小的了
- 可以定义一个新数组，将数组排个序
- **排序之后，其实每一个数值的下标就代表这前面有几个比它小的了**。

```C++
vector<int> vec = nums;
sort(vec.begin(), vec.end()); // 从小到大排序之后，元素下标就是小于当前数字的数字
```

- 用一个哈希表hash（本题可以就用一个数组）来做数值和下标的映射。
- 这样就可以通过数值快速知道下标（也就是前面有几个比它小的）。



- 特例情况：数值相同怎么办？

- 例如，数组：1 2 3 4 4 4 ，第一个数值4的下标是3，第二个数值4的下标是4了。

- 这里就需要一个技巧了，**在构造数组hash的时候，从后向前遍历，这样hash里存放的就是相同元素最左面的数值和下标了**。

- ```C++
  int hash[101];
  for (int i = vec.size() - 1; i >= 0; i--) { // 从后向前，记录 vec[i] 对应的下标
      hash[vec[i]] = i;
  }
  ```

- 最后在遍历原数组nums，用hash快速找到每一个数值 对应的 小于这个数值的个数。

- 存放在将结果存放在另一个数组中。

- ```C++
  // 此时hash里保存的每一个元素数值 对应的 小于这个数值的个数
  for (int i = 0; i < nums.size(); i++) {
      vec[i] = hash[nums[i]];
  }
  ```

- ![image-20220829213311034](https://happygoing.oss-cn-beijing.aliyuncs.com/img/image-20220829213311034.png)

## 题解

### C++

```C++
class Solution {
public:
    vector<int> smallerNumbersThanCurrent(vector<int>& nums) 
    {
        vector<int> vec=nums;
        sort(vec.begin(),vec.end());    // 从小到大排序之后，元素下标就是小于当前数字的数字
        int hash[101];
        for(int i=vec.size()-1;i>=0;i--)
        {
            // 从后向前，记录 vec[i] 对应的下标
            hash[vec[i]]=i;
        }
        // 此时hash里保存的每一个元素数值 对应的 小于这个数值的个数
        for (int i = 0; i < nums.size(); i++) 
        {
            vec[i] = hash[nums[i]];
        }
        return vec;
    }
};
```

## 思考

![image-20220829213625630](https://happygoing.oss-cn-beijing.aliyuncs.com/img/image-20220829213625630.png)